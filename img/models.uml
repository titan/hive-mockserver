@startuml
package Profile {
  object User
}
package Group {
  object Group {
    apportion-ratio
  }
  object GroupItem
  object AppliedVehicle
  object WaitingVehicle
  object JoinedVehicle
  object QuittedVehicle
  object GroupPollItem
}
package Plan {
  object Plan
  object PlanItem
  object PlanRule
}
package Vehicle {
  object Person
  object Driver
  object Owner
  object Vehicle
  object VehicleModel
}
package MutualAid {
  object MutualAid
  object Recompense
}
package Wallet {
  object Wallet
  object Transaction
  object Account
}
package Order {
  object Order
  object PlanOrder {
    type = 0
  }
  object SaleOrder {
    type = 2
  }
  object DriverOrder {
    type = 1
  }
  object OrderItem
  object OrderEvent
}
package Quotation {
  object Quotation
  object QuotationGroup
  object QuotationItem
  object QuotationItemQuota
  object QuotationItemPrice
}
package Underwrite {
  object Underwrite
}
package Cashout {
  object Cashout
  object CashoutEvent
}

Plan "1" --> "*" PlanItem
Plan "1" --> "*" PlanRule

Order <|-- PlanOrder
Order <|-- SaleOrder
Order <|-- DriverOrder
Order "1" --> "*" OrderEvent

User "1" --> "*" Order
User "1" --> "*" Quotation
User --> Wallet
User --> Group

Order -> Vehicle
Group "1" <- "*" PlanOrder
Group "1" --> "*" GroupItem
Group "1" --> "*" WaitingVehicle
Group "1" --> "*" AppliedVehicle
Group "1" --> "*" JoinedVehicle
Group "1" --> "*" QuittedVehicle
GroupItem --> Vehicle
GroupPollItem --> AppliedVehicle
WaitingVehicle - Vehicle
AppliedVehicle - Vehicle

PlanOrder "1" --> "*" Plan
OrderItem "*" --> "1" Plan

PlanOrder "1" --> "*" OrderItem

PlanItem <- OrderItem

DriverOrder "1" -> "*" Driver

User "1" --> "*" MutualAid

Person <|-- Driver
Person <|-- Owner
VehicleModel <-- Vehicle
Vehicle "1" --> "*" Driver
Vehicle --> Owner

Wallet "1" --> "*" Account
Account "1" --> "*" Transaction
Wallet "1" -> "*" Cashout

PlanOrder - Account

MutualAid -> Driver
MutualAid -> Vehicle
MutualAid "1" --> "*" Recompense

Quotation "1" --> "*" QuotationGroup
QuotationGroup -> Plan
QuotationGroup "1" --> "*" QuotationItem
QuotationItem "1" --> "*" QuotationItemQuota
QuotationItem "1" --> "*" QuotationItemPrice

PlanItem <- QuotationItem

Quotation -> Vehicle

Underwrite --> PlanOrder

Cashout "1" -- "*" CashoutEvent

@enduml
